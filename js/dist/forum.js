(()=>{var t={n:a=>{var n=a&&a.__esModule?()=>a.default:()=>a;return t.d(n,{a:n}),n},d:(a,n)=>{for(var o in n)t.o(n,o)&&!t.o(a,o)&&Object.defineProperty(a,o,{enumerable:!0,get:n[o]})},o:(t,a)=>Object.prototype.hasOwnProperty.call(t,a),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},a={};(()=>{"use strict";t.r(a);const n=flarum.core.compat["common/app"];t.n(n)().initializers.add("dhtml/flarum-leaderboard",(function(){}));const o=flarum.core.compat["forum/app"];var r=t.n(o);function e(t,a){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,a){return t.__proto__=a,t},e(t,a)}function s(t,a){t.prototype=Object.create(a.prototype),t.prototype.constructor=t,e(t,a)}const i=flarum.core.compat["common/helpers/avatar"];var c=t.n(i);const l=flarum.core.compat["common/components/Page"];var u=t.n(l);const d=flarum.core.compat["forum/components/IndexPage"];var f=t.n(d);const p=flarum.core.compat["common/components/Button"];var h=t.n(p);const g=flarum.core.compat["common/components/LoadingIndicator"];var v=t.n(g);const b=flarum.core.compat["common/helpers/listItems"];var y=t.n(b);const k=flarum.core.compat["common/helpers/username"];var N=t.n(k);const P=flarum.core.compat["common/components/Link"];var O=t.n(P);const _=flarum.core.compat["common/Component"];var j=t.n(_);const x=flarum.core.compat["common/helpers/icon"];var I=t.n(x),R=function(t){function a(){return t.apply(this,arguments)||this}return s(a,t),a.prototype.view=function(){var t=r().forum.attribute("fof-gamification.topimage"+this.attrs.place+"Url"),a=this.attrs.place;return t?m("img",{className:"rankings-mobile rankings-image rankings-"+a,src:t,alt:""}):m("td",{className:"rankings-mobile rankings-"+a},I()("fas fa-trophy"))},a}(j()),S=function(t){function a(){return t.apply(this,arguments)||this}s(a,t);var n=a.prototype;return n.oninit=function(a){t.prototype.oninit.call(this,a),r().forum.attribute("canViewRankingPage")||m.route.set("/"),r().setTitle(r().translator.trans("dhtml-leaderboard.forum.leaderboard")),this.loading=!0,this.users=[],this.refresh()},n.view=function(){var t=this;return this.loading?v().component():h().component({className:"Button",onclick:this.loadMore.bind(this)},r().translator.trans("core.forum.discussion_list.load_more_button")),m("div",{className:"IndexPage"},f().prototype.hero(),m("div",{className:"container"},m("div",{className:"sideNavContainer"},m("nav",{className:"IndexPage-nav sideNav"},m("ul",null,y()(f().prototype.sidebarItems().toArray()))),m("div",{className:"IndexPage-results sideNavOffset"},m("header",{class:"Hero PageHero"},m("div",{class:"iconcontainer"},m("div",{class:"fontico"},m("i",{class:"fas fa-trophy"})," Â "),m("div",{class:"icocont"},m("div",{class:"titolo1"},"Leaderboard")))),m("table",{class:"rankings"},m("tr",null,m("th",{className:"rankings-mobile"},r().translator.trans("fof-gamification.forum.ranking.rank")),m("th",null,r().translator.trans("fof-gamification.forum.ranking.name")),m("th",null,r().translator.trans("fof-gamification.forum.ranking.amount"))),this.users.map((function(a,n){return++n,[m("tr",{className:"ranking-"+n},n<4?m(R,{place:n}):m("td",{className:"rankings-4 rankings-mobile"},t.addOrdinalSuffix(n)),m("td",null,m("div",{className:"PostUser"},m("h3",{className:"rankings-info"},m(O(),{href:r().route.user(a),force:!0},n<11?c()(a,{className:"info-avatar rankings-"+n+"-avatar"}):""," ",N()(a))))),n<11?m("td",{className:"rankings-"+n},a.points()):m("td",{className:"rankings-4"},a.points()))]})))))))},n.refresh=function(t){var a=this;return void 0===t&&(t=!0),t&&(this.loading=!0,this.users=[]),this.loadResults().then((function(t){a.users=[],a.parseResults(t)}),(function(){a.loading=!1,m.redraw()}))},n.addOrdinalSuffix=function(t){if("en"===r().data.locale){var a=t%10,n=t%100;return 1===a&&11!==n?t+"st":2===a&&12!==n?t+"nd":3===a&&13!==n?t+"rd":t+"th"}return t},n.loadResults=function(t){var a={};return a.page={offset:t,limit:"6"},r().store.find("rankings",a)},n.loadMore=function(){this.loading=!0,this.loadResults(this.users.length).then(this.parseResults.bind(this))},n.parseResults=function(t){return[].push.apply(this.users,t),this.loading=!1,this.users.sort((function(t,a){return parseFloat(a.points())-parseFloat(t.points())})),m.redraw(),t},a}(u());r().initializers.add("dhtml/flarum-leaderboard",(function(){r().routes.leaderboard={path:"/leaderboard",component:S}}))})(),module.exports=a})();
//# sourceMappingURL=forum.js.map